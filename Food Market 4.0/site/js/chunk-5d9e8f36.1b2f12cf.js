(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d9e8f36"],{"06b5":function(t,o,e){},1276:function(t,o,e){"use strict";var a=e("d784"),s=e("44e7"),i=e("825a"),r=e("1d80"),l=e("4840"),n=e("8aa5"),c=e("50c4"),d=e("14c3"),u=e("9263"),g=e("d039"),p=[].push,f=Math.min,b=4294967295,m=!g((function(){return!RegExp(b,"y")}));a("split",2,(function(t,o,e){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var a=String(r(this)),i=void 0===e?b:e>>>0;if(0===i)return[];if(void 0===t)return[a];if(!s(t))return o.call(a,t,i);var l,n,c,d=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,m=new RegExp(t.source,g+"g");while(l=u.call(m,a)){if(n=m.lastIndex,n>f&&(d.push(a.slice(f,l.index)),l.length>1&&l.index<a.length&&p.apply(d,l.slice(1)),c=l[0].length,f=n,d.length>=i))break;m.lastIndex===l.index&&m.lastIndex++}return f===a.length?!c&&m.test("")||d.push(""):d.push(a.slice(f)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)}:o,[function(o,e){var s=r(this),i=void 0==o?void 0:o[t];return void 0!==i?i.call(o,s,e):a.call(String(s),o,e)},function(t,s){var r=e(a,t,this,s,a!==o);if(r.done)return r.value;var u=i(t),g=String(this),p=l(u,RegExp),h=u.unicode,_=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),v=new p(m?u:"^(?:"+u.source+")",_),x=void 0===s?b:s>>>0;if(0===x)return[];if(0===g.length)return null===d(v,g)?[g]:[];var C=0,w=0,y=[];while(w<g.length){v.lastIndex=m?w:0;var $,B=d(v,m?g:g.slice(w));if(null===B||($=f(c(v.lastIndex+(m?0:w)),g.length))===C)w=n(g,w,h);else{if(y.push(g.slice(C,w)),y.length===x)return y;for(var k=1;k<=B.length-1;k++)if(y.push(B[k]),y.length===x)return y;w=C=$}}return y.push(g.slice(C)),y}]}),!m)},"223c":function(t,o,e){"use strict";var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"toastification"},[e("div",{staticClass:"d-flex align-items-start"},[e("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[e("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),e("div",{staticClass:"d-flex flex-grow-1"},[e("div",[t.title?e("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?e("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),e("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(o){return t.$emit("close-toast")}}},[t.hideClose?t._e():e("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},s=[],i=e("e8a3"),r={components:{BAvatar:i["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},l=r,n=(e("b549"),e("2877")),c=Object(n["a"])(l,a,s,!1,null,"55dd3057",null);o["a"]=c.exports},"8d81":function(t,o,e){},"9acc":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("form-wizard",{ref:"checkinFormWizard",staticClass:"steps-transparent mb-3",attrs:{color:"#0E2551",title:null,subtitle:null,"finish-button-text":"Salva","back-button-text":"Indietro","next-button-text":"Avanti"},on:{"on-complete":t.formSubmitted}},[e("tab-content",{attrs:{title:"Selezione cassetta",icon:"feather icon-inbox"}},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Cassetta","label-for":"box_code","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("v-select",{staticClass:"singleFull",attrs:{id:"box_code",label:"code",placeholder:"Seleziona l'identificativo dalla lista o passa la cassetta sulla bilancia",options:t.boxes},model:{value:t.form.box_code,callback:function(o){t.$set(t.form,"box_code",o)},expression:"form.box_code"}})],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Tara cassetta","label-for":"box_tare","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("cleave",{staticClass:"doubleFull cleave",attrs:{id:"box_tare",placeholder:"Inserisci la tara della cassetta o pesala sulla bilancia",options:t.number,value:"","numeric-only":""},model:{value:t.form.box_tare,callback:function(o){t.$set(t.form,"box_tare",o)},expression:"form.box_tare"}}),e("b-input-group-append",{attrs:{"is-text":""}},[t._v(" Kg. ")])],1)],1)],1)],1)],1),e("tab-content",{attrs:{title:"Inserimento merce",icon:"feather icon-box"}},[e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Tipologia merce","label-for":"good_id","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("v-select",{staticClass:"singleFull",attrs:{id:"good_id",label:"singular",placeholder:"Seleziona la tipologia della merce dalla lista",options:t.goods},model:{value:t.form.good_id,callback:function(o){t.$set(t.form,"good_id",o)},expression:"form.good_id"}})],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Peso merce","label-for":"good_weight","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("cleave",{staticClass:"doubleFull cleave",attrs:{id:"good_weight",placeholder:"Inserisci il peso della merce o pesala sulla bilancia",options:t.number,value:"","numeric-only":""},model:{value:t.form.good_weight,callback:function(o){t.$set(t.form,"good_weight",o)},expression:"form.good_weight"}}),e("b-input-group-append",{attrs:{"is-text":""}},[t._v(" Kg. ")])],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Categoria","label-for":"good_category","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("v-select",{staticClass:"singleFull",attrs:{id:"good_category",label:"name",placeholder:"Seleziona la categoria della merce dalla lista",options:t.goodCategories},model:{value:t.form.good_category,callback:function(o){t.$set(t.form,"good_category",o)},expression:"form.good_category"}})],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Provenienza","label-for":"good_origin","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("v-select",{key:"code",staticClass:"singleFull",attrs:{id:"good_origin",label:"name",placeholder:"Seleziona la provenienza della merce dalla lista",options:t.countries},model:{value:t.form.good_origin,callback:function(o){t.$set(t.form,"good_origin",o)},expression:"form.good_origin"}})],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Prezzo al Kg.","label-for":"good_price","label-cols-md":"4"}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{attrs:{icon:"GridIcon"}})],1),e("cleave",{staticClass:"doubleFull cleave smaller",attrs:{id:"good_price",placeholder:"Inserisci il prezzo al Kg. della merce",options:t.number,value:"","numeric-only":""},model:{value:t.form.good_price,callback:function(o){t.$set(t.form,"good_price",o)},expression:"form.good_price"}}),e("b-input-group-append",{attrs:{"is-text":""}},[t._v(" €/Kg. ")])],1)],1)],1)],1),e("tab-content",{attrs:{title:"Conferma",icon:"feather icon-check"}},[e("b-card",{attrs:{"no-body":""}},[e("b-card-header",[e("b-card-title",[e("h2",[t._v("Verifica valori impostati")]),e("br")])],1),e("b-card-body",[e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Identificativo cassetta:")]),e("dd",{staticClass:"col-sm-9"},[t._v(" "+t._s(t.form.box_code.code+" - "+t.form.box_code.color)+" ")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Tara cassetta:")]),e("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.form.box_tare)+" Kg.")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Tipologia merce:")]),e("dd",{staticClass:"col-sm-9"},[t._v(" "+t._s(t.form.good_id.singular)+" ")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Peso merce:")]),e("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.form.good_weight)+" Kg.")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Categoria:")]),e("dd",{staticClass:"col-sm-9"},[t._v(" "+t._s(t.form.good_category.name)+" ")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Provenienza:")]),e("dd",{staticClass:"col-sm-9"},[t._v(" "+t._s(t.form.good_origin.name)+" ")])]),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-3"},[t._v("Prezzo al Kg.:")]),e("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.form.good_price)+" €/Kg.")])])])],1)],1)],1)],1)},s=[],i=(e("a15b"),e("d81d"),e("ac1f"),e("1276"),e("b0c0"),e("2ee4")),r=(e("223c"),e("4a7a")),l=e.n(r),n=e("2083"),c=e.n(n),d=e("e009"),u=(e("da93"),e("a15b7")),g=e("b28b"),p=e("5e12"),f=e("8226"),b=e("4797"),m=e("3656"),h=e("ccc0"),_=e("c3e6"),v=e("11de"),x=e("1947"),C=e("205f"),w=e("4968"),y=e("d6e4"),$=e("b885"),B=e("6197"),k={components:{FormWizard:i["FormWizard"],TabContent:i["TabContent"],BRow:u["a"],BCol:g["a"],BInputGroup:p["a"],BFormGroup:f["a"],BFormInput:b["a"],BInputGroupPrepend:m["a"],BInputGroupAppend:h["a"],BFormCheckbox:_["a"],BForm:v["a"],BButton:x["a"],BCard:C["a"],BCardTitle:w["a"],BCardText:y["a"],BCardHeader:$["a"],BCardBody:B["a"],vSelect:l.a,Cleave:c.a},directives:{Ripple:d["a"]},data:function(){return{number:{numeral:!0,numeralThousandsGroupStyle:"thousand",autocomplete:"off"},form:{box_code:"",box_tare:this.$store.getters["defaults/GET"].boxTare,good_id:"",good_weight:"",good_category:"",good_origin:"",good_price:""},countries:[],boxes:[],goods:[],goodCategories:[]}},beforeCreate:function(){var t=this;this.$store.dispatch("boxes/get").then((function(o){console.log(o),t.boxes=o.data.data})),this.$store.dispatch("goods/get").then((function(o){console.log(o),t.goods=o.data.data})),this.$store.dispatch("countries/get").then((function(o){console.log(o),t.countries=o.data.data})),this.$store.dispatch("goodcategories/get").then((function(o){console.log(o),t.goodCategories=o.data.data}))},setup:function(){},created:function(){var t=this;window.$eventBus.$on("box",(function(o){console.log("👂 received box",o),t.form.box_code=o,t.form.box_tare=o.tare})),window.$eventBus.$on("weight",(function(o){console.log("👂 received weight",o);var e=0;t.form.box_tare&&(e=t.form.box_tare),t.form.good_weight=o-e}))},destroyed:function(){console.log("⏩ destroyed"),window.$eventBus.$off("weight"),window.$eventBus.$off("box")},methods:{capitalize:function(t){return void 0===t?"":t.toLowerCase().split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.substring(1)})).join(" ")},formSubmitted:function(){var t=this,o={};o.box_code=t.form.box_code.code,o.box_tare=t.form.box_tare,o.location=t.$store.getters["defaults/GET"].goodLocationAtCheckin,o.good_id=t.form.good_id.id,o.good_weight=t.form.good_weight,o.good_category=t.form.good_category.name,o.good_origin=t.form.good_origin.code,o.good_price=t.form.good_price,console.log("- create parameters",o),t.$store.dispatch("transactions/add",o).then((function(e){console.log("- transaction added",e),t.$store.dispatch("flows/add",o).then((function(o){console.log("- flow added",o),t.dataSaved()}))}))},dataSaved:function(){var t=this,o=this;this.$swal({title:"Check-in completato",text:"Vuoi fare il check-in con la stessa merce?",icon:"success",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No, torna alla home",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(e){e.value?(console.log("check-in"),o.form.box_code={},o.form.good_weight="",t.$refs.checkinFormWizard.changeTab(2,0)):t.$router.push({name:"home"})}))}}},I=k,z=(e("e6a6"),e("2877")),S=Object(z["a"])(I,a,s,!1,null,null,null);o["default"]=S.exports},b549:function(t,o,e){"use strict";e("8d81")},da93:function(t,o,e){},e6a6:function(t,o,e){"use strict";e("06b5")}}]);
//# sourceMappingURL=chunk-5d9e8f36.1b2f12cf.js.map